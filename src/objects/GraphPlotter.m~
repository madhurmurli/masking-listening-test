classdef GraphPlotter < handle
    %Graph Plotter - A container to plot data  .
    %
    %   This class has been created to plot a graph of the ongoing test
    %
    %
    %
    %
    
    % Madhur Murli
    
    properties (SetAccess = private)
        Name;                       % Name of the subject
        ID;                         % An ID for the subject
        FigureHandle                % Handle to the Figure on which to plot
        % Whatever other information we want....
        
        PlotPointsX;             % Cell array of Plot Points
        PlotPointsY;
        PlotPointsType;
    end
    
    methods
        function obj = GraphPlotter(name, id)
            obj.Name = name;
            obj.ID = id;
            
            obj.FigureHandle = figure;
            obj.FigureHandle.set('Markersize', '18');
        end
        
%         function SetFigureHandle(obj,figHandle)
%             obj.FigureHandle=figHandle;
%         end
        
        function AddPlot2(obj, x, y, type)
            % Bring the Plot Figure to the foreground
            figure(obj.FigureHandle);
            
            % Change the point that's being plotted
            if(type == 1)
                plot(x, y, 'b--o');
                
            elseif(type == 2)
                plot(x, y, 'g+');
                
            elseif(type == 3)
                plot(x, y, 'r*');
                
            end
        end
        
        function PlotPoints(obj, responses)
            % Bring the Plot Figure to the foreground
            figure(obj.FigureHandle);
            
            ylabel('SPL (dB)');
            title(['Audibility Threshold ' obj.Name '-' obj.ID ]);
            
            varXaxis = length(responses);
            if varXaxis < 10
                varXaxis = 10;
            elseif mod(varXaxis, 5) == 0
                varXaxis = varXaxis + 5;
                
            
            axis([0 (floor(length(responses)/5)+5) 30 100]);
            
            for i = 1:size(responses, 2)
                if responses{i}.Detected
                     plot(i, responses{i}.Level, 'g+');
                     
                else
                     plot(i,responses{i}.Level,'r*');

                end
                
                hold on;
            end
        end
    end
    
end

